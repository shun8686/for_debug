Writing to /root/.config/pip/pip.conf
Writing to /root/.config/pip/pip.conf
Writing to /root/.config/pip/pip.conf
Looking in indexes: http://cache-service.nginx-pypi-cache.svc.cluster.local/pypi/simple, https://pypi.tuna.tsinghua.edu.cn/simple
Collecting kubernetes
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/ca/ec/65f7d563aa4a62dd58777e8f6aa882f15db53b14eb29aba0c28a20f7eb26/kubernetes-34.1.0-py2.py3-none-any.whl (2.0 MB)
Requirement already satisfied: certifi>=14.05.14 in /usr/local/python3.11.13/lib/python3.11/site-packages (from kubernetes) (2025.11.12)
Requirement already satisfied: six>=1.9.0 in /usr/local/python3.11.13/lib/python3.11/site-packages (from kubernetes) (1.17.0)
Requirement already satisfied: python-dateutil>=2.5.3 in /usr/local/python3.11.13/lib/python3.11/site-packages (from kubernetes) (2.9.0.post0)
Requirement already satisfied: pyyaml>=5.4.1 in /usr/local/python3.11.13/lib/python3.11/site-packages (from kubernetes) (6.0.3)
Collecting google-auth>=1.0.1 (from kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c6/97/451d55e05487a5cd6279a01a7e34921858b16f7dc8aa38a2c684743cd2b3/google_auth-2.45.0-py2.py3-none-any.whl (233 kB)
Collecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 (from kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/34/db/b10e48aa8fff7407e67470363eac595018441cf32d5e1001567a7aeba5d2/websocket_client-1.9.0-py3-none-any.whl (82 kB)
Requirement already satisfied: requests in /usr/local/python3.11.13/lib/python3.11/site-packages (from kubernetes) (2.32.5)
Collecting requests-oauthlib (from kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/3b/5d/63d4ae3b9daea098d5d6f5da83984853c1bbacd5dc826764b249fe119d24/requests_oauthlib-2.0.0-py2.py3-none-any.whl (24 kB)
Collecting urllib3<2.4.0,>=1.24.2 (from kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c8/19/4ec628951a74043532ca2cf5d97b7b14863931476d117c471e8e2b1eb39f/urllib3-2.3.0-py3-none-any.whl (128 kB)
Collecting durationpy>=0.7 (from kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/b0/0d/9feae160378a3553fa9a339b0e9c1a048e147a4127210e286ef18b730f03/durationpy-0.10-py3-none-any.whl (3.9 kB)
Collecting cachetools<7.0,>=2.0.0 (from google-auth>=1.0.1->kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/2c/fc/1d7b80d0eb7b714984ce40efc78859c022cd930e402f599d8ca9e39c78a4/cachetools-6.2.4-py3-none-any.whl (11 kB)
Collecting pyasn1-modules>=0.2.1 (from google-auth>=1.0.1->kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/47/8d/d529b5d697919ba8c11ad626e835d4039be708a35b0d22de83a269a6682c/pyasn1_modules-0.4.2-py3-none-any.whl (181 kB)
Collecting rsa<5,>=3.1.4 (from google-auth>=1.0.1->kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/64/8d/0133e4eb4beed9e425d9a98ed6e081a55d195481b7632472be1af08d2f6b/rsa-4.9.1-py3-none-any.whl (34 kB)
Collecting pyasn1>=0.1.3 (from rsa<5,>=3.1.4->google-auth>=1.0.1->kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c8/f1/d6a797abb14f6283c0ddff96bbdd46937f64122b8c925cab503dd37f8214/pyasn1-0.6.1-py3-none-any.whl (83 kB)
Requirement already satisfied: charset_normalizer<4,>=2 in /usr/local/python3.11.13/lib/python3.11/site-packages (from requests->kubernetes) (3.4.4)
Requirement already satisfied: idna<4,>=2.5 in /usr/local/python3.11.13/lib/python3.11/site-packages (from requests->kubernetes) (3.11)
Collecting oauthlib>=3.0.0 (from requests-oauthlib->kubernetes)
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/be/9c/92789c596b8df838baa98fa71844d84283302f7604ed565dafe5a6b5041a/oauthlib-3.3.1-py3-none-any.whl (160 kB)
Installing collected packages: durationpy, websocket-client, urllib3, pyasn1, oauthlib, cachetools, rsa, pyasn1-modules, requests-oauthlib, google-auth, kubernetes
  Attempting uninstall: urllib3
    Found existing installation: urllib3 2.5.0
    Uninstalling urllib3-2.5.0:
      Successfully uninstalled urllib3-2.5.0

Successfully installed cachetools-6.2.4 durationpy-0.10 google-auth-2.45.0 kubernetes-34.1.0 oauthlib-3.3.1 pyasn1-0.6.1 pyasn1-modules-0.4.2 requests-oauthlib-2.0.0 rsa-4.9.1 urllib3-2.3.0 websocket-client-1.9.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  732k  100  732k    0     0   930k      0 --:--:-- --:--:-- --:--:--  930k
performance
vm.swappiness = 0
kernel.numa_balancing = 0
kernel.sched_migration_cost_ns = 50000
Running test case test/nightly/ascend/performance/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.py
The nic name matched is enp23s0f3
The nic name matched is enp23s0f3
Nic name: enp23s0f3
Init 192.168.0.60 cls.role='router'!
[CI Test Method] Test_DeepSeek_V3_2_W8A8_1P1D.test_throughput
Starting router in thread...
launch_router start ......Waiting for router to be ready at http://127.0.0.1:6688/health

Discovered 4 worker nodes (prefill: 2, decode: 2)
Discovered 4 worker nodes
Successfully queried ConfigMap sglang-info in namespace sglang-multi-debug
Retrieved ConfigMap data: {'sglang-multi-debug-sglang-decode-0': '192.168.0.184', 'sglang-multi-debug-sglang-decode-1': '192.168.0.60', 'sglang-multi-debug-sglang-prefill-0': '192.168.0.77', 'sglang-multi-debug-sglang-prefill-1': '192.168.0.81', 'sglang-multi-debug-sglang-router-0': '192.168.0.60'}
ConfigMap monitoring complete: prefill_url=['192.168.0.77:8000'], decode_url=['192.168.0.184:8000'], bootstrap_ports=['8995'], node_ip_list=['192.168.0.184', '192.168.0.77']
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is not ready yet
Node 192.168.0.77:8000 is not ready yet
Waiting for 2 more nodes to be ready...
Node 192.168.0.184:8000 is ready
Node 192.168.0.77:8000 is not ready yet
Waiting for 1 more nodes to be ready...
Node 192.168.0.184:8000 is ready
Node 192.168.0.77:8000 is ready
All 2 nodes' ports are ready!
Setting ENV_VAR SGLANG_DP_ROUND_ROBIN=1
Starting router with command: python3 -u -m sglang_router.launch_router --host 127.0.0.1 --port 6688 --pd-disaggregation --policy cache_aware --mini-lb --prefill http://192.168.0.77:8000 8995 --decode http://192.168.0.184:8000
Router process started with PID: 805
/usr/local/python3.11.13/lib/python3.11/subprocess.py:1127: ResourceWarning: subprocess 805 is still running
  _warn("subprocess %s is still running" % self.pid,
[33mMiniLB is only for debugging purposes, it only supports random policy![0m
[MiniLB] Overriding policy to random
INFO:     Started server process [806]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:6688 (Press CTRL+C to quit)
INFO:     127.0.0.1:39680 - "GET /health HTTP/1.1" 200 OK
Router http://127.0.0.1:6688/health is ready!
Waiting 120 seconds for the server to fully initialize...
Starting benchmark with parameters: {'host': '127.0.0.1', 'port': '6688', 'model_path': '/root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8', 'dataset_name': 'random', 'request_rate': 'inf', 'max_concurrency': 32, 'num_prompts': 64, 'input_len': 64000, 'output_len': 3000, 'random_range_ratio': 1, 'result_file': '/data/d00662834/metrics/20260104/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.txt'}
The metrics result file: /data/d00662834/metrics/20260104/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.txt
Command: python3 -m sglang.bench_serving --backend sglang --model /root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8 --host 127.0.0.1 --port 6688 --dataset-name random --request-rate inf --max-concurrency 32 --num-prompts 64 --random-input-len 64000 --random-output-len 3000 --random-range-ratio 1
INFO:     127.0.0.1:58160 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48970 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48974 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48978 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48956 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49004 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49012 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49034 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49038 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48994 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48996 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49008 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49030 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49084 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49186 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48954 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48986 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49014 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49052 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49062 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49076 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49088 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49102 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49116 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49128 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49136 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49144 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49158 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49172 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49202 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49204 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49212 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:49106 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:50744 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:50756 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:37960 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:37964 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:37980 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43776 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43790 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43802 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43806 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43810 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43814 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43824 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43834 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43838 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43850 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34548 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34562 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34578 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48308 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48324 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48326 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:57162 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:57176 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:51028 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:36110 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:42032 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:42042 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48254 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48256 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48270 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48272 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:47156 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:45852 - "GET /get_server_info HTTP/1.1" 200 OK
INFO:     127.0.0.1:45858 - "GET /get_server_info HTTP/1.1" 200 OK
metrics is benchmark_args=Namespace(backend='sglang', base_url=None, host='127.0.0.1', port=6688, dataset_name='random', dataset_path='', model='/root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8', served_model_name=None, tokenizer=None, num_prompts=64, sharegpt_output_len=None, sharegpt_context_len=None, random_input_len=64000, random_output_len=3000, random_range_ratio=1.0, image_count=1, image_resolution='1080p', random_image_count=False, image_format='jpeg', image_content='random', request_rate=inf, use_trace_timestamps=False, max_concurrency=32, output_file=None, output_details=False, print_requests=False, disable_tqdm=False, disable_stream=False, return_logprob=False, return_routed_experts=False, seed=1, disable_ignore_eos=False, extra_request_body=None, apply_chat_template=False, profile=False, plot_throughput=False, profile_activities=['CPU', 'GPU'], profile_num_steps=None, profile_by_stage=False, profile_stages=None, lora_name=None, lora_request_distribution='uniform', lora_zipf_alpha=1.5, prompt_suffix='', pd_separated=False, profile_prefill_url=None, profile_decode_url=None, flush_cache=False, warmup_requests=1, tokenize_prompt=False, gsp_num_groups=64, gsp_prompts_per_group=16, gsp_system_prompt_len=2048, gsp_question_len=128, gsp_output_len=256, gsp_range_ratio=1.0, gsp_fast_prepare=False, gsp_send_routing_id=False, mooncake_slowdown_factor=1.0, mooncake_num_rounds=1, mooncake_workload='conversation', tag=None)
Namespace(backend='sglang', base_url=None, host='127.0.0.1', port=6688, dataset_name='random', dataset_path='', model='/root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8', served_model_name=None, tokenizer=None, num_prompts=64, sharegpt_output_len=None, sharegpt_context_len=None, random_input_len=64000, random_output_len=3000, random_range_ratio=1.0, image_count=1, image_resolution='1080p', random_image_count=False, image_format='jpeg', image_content='random', request_rate=inf, use_trace_timestamps=False, max_concurrency=32, output_file=None, output_details=False, print_requests=False, disable_tqdm=False, disable_stream=False, return_logprob=False, return_routed_experts=False, seed=1, disable_ignore_eos=False, extra_request_body=None, apply_chat_template=False, profile=False, plot_throughput=False, profile_activities=['CPU', 'GPU'], profile_num_steps=None, profile_by_stage=False, profile_stages=None, lora_name=None, lora_request_distribution='uniform', lora_zipf_alpha=1.5, prompt_suffix='', pd_separated=False, profile_prefill_url=None, profile_decode_url=None, flush_cache=False, warmup_requests=1, tokenize_prompt=False, gsp_num_groups=64, gsp_prompts_per_group=16, gsp_system_prompt_len=2048, gsp_question_len=128, gsp_output_len=256, gsp_range_ratio=1.0, gsp_fast_prepare=False, gsp_send_routing_id=False, mooncake_slowdown_factor=1.0, mooncake_num_rounds=1, mooncake_workload='conversation', tag=None)

#Input tokens: 4096000
#Output tokens: 192000
Starting warmup with 1 sequences...
Warmup completed with 1 sequences. Starting main benchmark run...

============ Serving Benchmark Result ============
Backend:                                 sglang    
Traffic request rate:                    inf       
Max request concurrency:                 32        
Successful requests:                     64        
Benchmark duration (s):                  488.89    
Total input tokens:                      4096000   
Total input text tokens:                 4096000   
Total input vision tokens:               0         
Total generated tokens:                  192000    
Total generated tokens (retokenized):    182414    
Request throughput (req/s):              0.13      
Input token throughput (tok/s):          8378.18   
Output token throughput (tok/s):         392.73    
Peak output token throughput (tok/s):    1058.00   
Peak concurrent requests:                34        
Total token throughput (tok/s):          8770.91   
Concurrency:                             21.44     
Accept length:                           2.48      
----------------End-to-End Latency----------------
Mean E2E Latency (ms):                   163752.52 
Median E2E Latency (ms):                 148866.58 
---------------Time to First Token----------------
Mean TTFT (ms):                          65042.01  
Median TTFT (ms):                        57838.15  
P99 TTFT (ms):                           161778.29 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          32.91     
Median TPOT (ms):                        28.31     
P99 TPOT (ms):                           73.36     
---------------Inter-Token Latency----------------
Mean ITL (ms):                           32.92     
Median ITL (ms):                         23.84     
P95 ITL (ms):                            72.88     
P99 ITL (ms):                            87.58     
Max ITL (ms):                            4832.36   
==================================================

Retrying benchmark...
The metrics result file: /data/d00662834/metrics/20260104/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.txt
Command: python3 -m sglang.bench_serving --backend sglang --model /root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8 --host 127.0.0.1 --port 6688 --dataset-name random --request-rate inf --max-concurrency 32 --num-prompts 64 --random-input-len 64000 --random-output-len 3000 --random-range-ratio 1
INFO:     127.0.0.1:45776 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34820 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34836 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34844 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34874 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34900 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34914 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34948 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34846 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34864 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34866 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34884 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34908 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34934 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34954 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34964 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34974 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34998 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35012 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35020 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35022 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35038 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35046 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35048 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35060 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35072 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34814 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34848 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34904 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34922 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34988 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34946 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:34976 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:39078 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:39092 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:37732 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59540 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59542 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59552 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:50486 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:50490 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43546 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43556 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:56394 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:56402 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:56410 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:56420 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59100 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59116 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59122 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:59128 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:33704 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:46832 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:46844 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:46848 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48104 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48122 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48120 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48136 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:48146 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43514 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:43528 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:33144 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:33154 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:33160 - "POST /generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:35816 - "GET /get_server_info HTTP/1.1" 200 OK
INFO:     127.0.0.1:35822 - "GET /get_server_info HTTP/1.1" 200 OK
metrics is benchmark_args=Namespace(backend='sglang', base_url=None, host='127.0.0.1', port=6688, dataset_name='random', dataset_path='', model='/root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8', served_model_name=None, tokenizer=None, num_prompts=64, sharegpt_output_len=None, sharegpt_context_len=None, random_input_len=64000, random_output_len=3000, random_range_ratio=1.0, image_count=1, image_resolution='1080p', random_image_count=False, image_format='jpeg', image_content='random', request_rate=inf, use_trace_timestamps=False, max_concurrency=32, output_file=None, output_details=False, print_requests=False, disable_tqdm=False, disable_stream=False, return_logprob=False, return_routed_experts=False, seed=1, disable_ignore_eos=False, extra_request_body=None, apply_chat_template=False, profile=False, plot_throughput=False, profile_activities=['CPU', 'GPU'], profile_num_steps=None, profile_by_stage=False, profile_stages=None, lora_name=None, lora_request_distribution='uniform', lora_zipf_alpha=1.5, prompt_suffix='', pd_separated=False, profile_prefill_url=None, profile_decode_url=None, flush_cache=False, warmup_requests=1, tokenize_prompt=False, gsp_num_groups=64, gsp_prompts_per_group=16, gsp_system_prompt_len=2048, gsp_question_len=128, gsp_output_len=256, gsp_range_ratio=1.0, gsp_fast_prepare=False, gsp_send_routing_id=False, mooncake_slowdown_factor=1.0, mooncake_num_rounds=1, mooncake_workload='conversation', tag=None)
Namespace(backend='sglang', base_url=None, host='127.0.0.1', port=6688, dataset_name='random', dataset_path='', model='/root/.cache/modelscope/hub/models/DeepSeek-V3.2-Exp-W8A8', served_model_name=None, tokenizer=None, num_prompts=64, sharegpt_output_len=None, sharegpt_context_len=None, random_input_len=64000, random_output_len=3000, random_range_ratio=1.0, image_count=1, image_resolution='1080p', random_image_count=False, image_format='jpeg', image_content='random', request_rate=inf, use_trace_timestamps=False, max_concurrency=32, output_file=None, output_details=False, print_requests=False, disable_tqdm=False, disable_stream=False, return_logprob=False, return_routed_experts=False, seed=1, disable_ignore_eos=False, extra_request_body=None, apply_chat_template=False, profile=False, plot_throughput=False, profile_activities=['CPU', 'GPU'], profile_num_steps=None, profile_by_stage=False, profile_stages=None, lora_name=None, lora_request_distribution='uniform', lora_zipf_alpha=1.5, prompt_suffix='', pd_separated=False, profile_prefill_url=None, profile_decode_url=None, flush_cache=False, warmup_requests=1, tokenize_prompt=False, gsp_num_groups=64, gsp_prompts_per_group=16, gsp_system_prompt_len=2048, gsp_question_len=128, gsp_output_len=256, gsp_range_ratio=1.0, gsp_fast_prepare=False, gsp_send_routing_id=False, mooncake_slowdown_factor=1.0, mooncake_num_rounds=1, mooncake_workload='conversation', tag=None)

#Input tokens: 4096000
#Output tokens: 192000
Starting warmup with 1 sequences...
Warmup completed with 1 sequences. Starting main benchmark run...

============ Serving Benchmark Result ============
Backend:                                 sglang    
Traffic request rate:                    inf       
Max request concurrency:                 32        
Successful requests:                     64        
Benchmark duration (s):                  430.97    
Total input tokens:                      4096000   
Total input text tokens:                 4096000   
Total input vision tokens:               0         
Total generated tokens:                  192000    
Total generated tokens (retokenized):    182879    
Request throughput (req/s):              0.15      
Input token throughput (tok/s):          9504.15   
Output token throughput (tok/s):         445.51    
Peak output token throughput (tok/s):    906.00    
Peak concurrent requests:                35        
Total token throughput (tok/s):          9949.66   
Concurrency:                             20.71     
Accept length:                           2.68      
----------------End-to-End Latency----------------
Mean E2E Latency (ms):                   139436.68 
Median E2E Latency (ms):                 127341.28 
---------------Time to First Token----------------
Mean TTFT (ms):                          57270.90  
Median TTFT (ms):                        50225.51  
P99 TTFT (ms):                           121055.10 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          27.40     
Median TPOT (ms):                        24.29     
P99 TPOT (ms):                           71.24     
---------------Inter-Token Latency----------------
Mean ITL (ms):                           27.40     
Median ITL (ms):                         23.82     
P95 ITL (ms):                            72.09     
P99 ITL (ms):                            74.37     
Max ITL (ms):                            382.07    
==================================================

Traceback (most recent call last):
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/srt/utils/common.py", line 2527, in retry
    return fn()
           ^^^^
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/test/test_utils.py", line 1704, in <lambda>
    lambda: super(CustomTestCase, self)._callTestMethod(method),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python3.11.13/lib/python3.11/unittest/case.py", line 579, in _callTestMethod
    if method() is not None:
       ^^^^^^^^
  File "/data/d00662834/1211_dev/sglang/test/nightly/ascend/performance/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.py", line 145, in test_throughput
    self.run_throughput()
  File "/data/d00662834/1211_dev/sglang/test/nightly/ascend/performance/test_ascend_disaggregation_utils.py", line 391, in run_throughput
    self.assertGreaterEqual(
  File "/usr/local/python3.11.13/lib/python3.11/unittest/case.py", line 1277, in assertGreaterEqual
    self.fail(self._formatMessage(msg, standardMsg))
  File "/usr/local/python3.11.13/lib/python3.11/unittest/case.py", line 703, in fail
    raise self.failureException(msg)
AssertionError: 445.51 not greater than or equal to 496.3225806451613
E
======================================================================
ERROR: test_throughput (__main__.Test_DeepSeek_V3_2_W8A8_1P1D.test_throughput)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/srt/utils/common.py", line 2527, in retry
    return fn()
           ^^^^
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/test/test_utils.py", line 1704, in <lambda>
    lambda: super(CustomTestCase, self)._callTestMethod(method),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 445.51 not greater than or equal to 496.3225806451613

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/test/test_utils.py", line 1703, in _callTestMethod
    retry(
  File "/usr/local/python3.11.13/lib/python3.11/site-packages/sglang/srt/utils/common.py", line 2535, in retry
    raise Exception(f"retry() exceed maximum number of retries.")
Exception: retry() exceed maximum number of retries.

----------------------------------------------------------------------
Ran 1 test in 1582.261s

FAILED (errors=1)
Finished test case test/nightly/ascend/performance/test_ascend_deepseek_v3.2_w8a8_1p1d_32p_in64k_out1k_30ms.py
